package br.com.castgroup.cursos.service;

import java.time.LocalDate;

import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Service;

import br.com.castgroup.cursos.form.FormCadastroCurso;
import br.com.castgroup.cursos.repository.CategoriaRepository;
import br.com.castgroup.cursos.repository.CursoRepository;

@Service
public class CursoService {
	

	public boolean isValid(ResponseEntity<String> resposta, FormCadastroCurso request, CursoRepository cursoRepository) {
		if (request.getInicio().isBefore(LocalDate.now())) {
			resposta = ResponseEntity.badRequest().body("Não é permitida a inclusão de cursos com a data de início menor que a data atual.");
			return false;							
		} 
		System.out.println("Contador: " + cursoRepository.contador(request.getInicio(), request.getTermino()));	
		if(cursoRepository.contador(request.getInicio(), request.getTermino())> 0) {	
			resposta = ResponseEntity.badRequest().body("Existe(m) curso(s) planejados(s) dentro do período informado.");
			return false;										
		}
		return true;
	}
	

	

}
